import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CRcojgv9.js";import"./chunks/@vueuse/motion.DgOGrpK1.js";import{e as g,u as F,a as y}from"./chunks/vue-router.SU_9AcH3.js";import{aa as C,aq as n,ag as a,af as l,ai as s,L as b,ab as m,a0 as f}from"./framework.CwRAi3M2.js";import"./app.UZrFpIJB.js";import"./chunks/dayjs.DRNXKsfK.js";import"./chunks/vue-i18n.CrAQ0PxR.js";import"./chunks/pinia.ZhWIb4h5.js";/* empty css                    */import"./chunks/nprogress.Y9-A6VbA.js";import"./YunComment.vue_vue_type_style_index_0_lang.Bg8-1SuQ.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.CWwFLlJS.js";import"./post.Bct4BOjr.js";const B=g("/posts/2025-07-24-homelab",async e=>JSON.parse('{"title":"Building a Modern Homelab with Free Domain and Cloudflare Zero Trust","description":"","frontmatter":{"title":"Building a Modern Homelab with Free Domain and Cloudflare Zero Trust","title_zh":"使用免费域名和 Cloudflare Zero Trust 构建现代化家庭实验室","date":"2025-07-24","updated":"2025-07-24","categories":"技术教程","tags":["Homelab","家庭实验室","Cloudflare","自动化","网络安全","Self-hosting"]},"headers":[],"relativePath":"pages/posts/2025-07-24-homelab.md","lastUpdated":1762669162000}'),{lazy:(e,t)=>e.name===t.name}),M={__name:"2025-07-24-homelab",setup(e,{expose:t}){var o;const{data:h}=B(),p=y(),k=F(),r=Object.assign(k.meta.frontmatter||{},((o=h.value)==null?void 0:o.frontmatter)||{});return p.currentRoute.value.data=h.value,f("valaxy:frontmatter",r),globalThis.$frontmatter=r,t({frontmatter:{title:"Building a Modern Homelab with Free Domain and Cloudflare Zero Trust",title_zh:"使用免费域名和 Cloudflare Zero Trust 构建现代化家庭实验室",date:"2025-07-24",updated:"2025-07-24",categories:"技术教程",tags:["Homelab","家庭实验室","Cloudflare","自动化","网络安全","Self-hosting"]}}),(i,d)=>{const u=c;return m(),C(u,{frontmatter:b(r)},{"main-content-md":n(()=>[...d[0]||(d[0]=[l("div",{lang:"zh-CN"},[l("h2",{lang:"zh-CN",id:"前言",tabindex:"-1"},[s("前言 "),l("a",{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言 {lang="zh-CN"}"'},"​")]),l("p",null,"作为一个喜欢折腾的技术爱好者，我一直想要搭建一个属于自己的家庭实验室（Homelab）。既要能在本地网络中使用，又要能通过互联网安全访问，还要有自动化功能来提高效率。经过一番研究和实践，我成功搭建了一套基于免费域名和 Cloudflare Zero Trust 的现代化 Homelab 方案。"),l("hr"),l("h2",{lang:"zh-CN",id:"为什么选择这套方案",tabindex:"-1"},[s("为什么选择这套方案？ "),l("a",{class:"header-anchor",href:"#为什么选择这套方案","aria-label":'Permalink to "为什么选择这套方案？ {lang="zh-CN"}"'},"​")]),l("p",null,"市面上有很多 Homelab 解决方案，但大多数要么需要昂贵的域名和证书，要么安全性不够好。我选择这套方案的原因："),l("ol",null,[l("li",null,[l("strong",null,"完全免费"),s(" - 使用 DigitalPlat FreeDomain 获取免费域名")]),l("li",null,[l("strong",null,"安全可靠"),s(" - Cloudflare Zero Trust 提供企业级安全保护")]),l("li",null,[l("strong",null,"易于管理"),s(" - 统一的 Web 界面管理所有服务")]),l("li",null,[l("strong",null,"高度自动化"),s(" - n8n 工作流自动化，定时备份")]),l("li",null,[l("strong",null,"隐私保护"),s(" - Pi-hole + Unbound 组合保护 DNS 隐私")])]),l("blockquote",null,[l("p",null,'"最好的 Homelab 方案不是最贵的，而是最适合自己的。"')]),l("hr"),l("h2",{lang:"zh-CN",id:"硬件配置与架构",tabindex:"-1"},[s("硬件配置与架构 "),l("a",{class:"header-anchor",href:"#硬件配置与架构","aria-label":'Permalink to "硬件配置与架构 {lang="zh-CN"}"'},"​")]),l("p",null,"我的 Homelab 采用了混合架构，主要包括："),l("h3",{lang:"zh-CN",id:"主服务器配置",tabindex:"-1"},[s("主服务器配置 "),l("a",{class:"header-anchor",href:"#主服务器配置","aria-label":'Permalink to "主服务器配置 {lang="zh-CN"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"CPU"),s(": Intel i5-6600T 处理器")]),l("li",null,[l("strong",null,"内存"),s(": 12GB DDR4")]),l("li",null,[l("strong",null,"存储"),s(": 256GB SSD")]),l("li",null,[l("strong",null,"网络"),s(": WiFi 连接")])]),l("h3",{lang:"zh-CN",id:"辅助设备",tabindex:"-1"},[s("辅助设备 "),l("a",{class:"header-anchor",href:"#辅助设备","aria-label":'Permalink to "辅助设备 {lang="zh-CN"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"Raspberry Pi Zero 2W"),s(": 作为 DNS 服务器和轻量级服务的节能方案")]),l("li",null,[l("strong",null,"Tailscale VPN"),s(": 连接所有设备形成私有网络")])]),l("hr"),l("h2",{lang:"zh-CN",id:"核心服务架构",tabindex:"-1"},[s("核心服务架构 "),l("a",{class:"header-anchor",href:"#核心服务架构","aria-label":'Permalink to "核心服务架构 {lang="zh-CN"}"'},"​")]),l("h3",{lang:"zh-CN",id:"主服务器服务列表",tabindex:"-1"},[s("主服务器服务列表 "),l("a",{class:"header-anchor",href:"#主服务器服务列表","aria-label":'Permalink to "主服务器服务列表 {lang="zh-CN"}"'},"​")]),l("table",null,[l("thead",null,[l("tr",null,[l("th",null,"服务名称"),l("th",null,"域名"),l("th",null,"端口"),l("th",null,"功能描述")])]),l("tbody",null,[l("tr",null,[l("td",null,[l("strong",null,"Syncthing")]),l("td",null,"syncthing.example.dpdns.org"),l("td",null,"8384"),l("td",null,"文件同步服务")]),l("tr",null,[l("td",null,[l("strong",null,"Cockpit")]),l("td",null,"cockpit.example.dpdns.org"),l("td",null,"9090"),l("td",null,"系统监控面板")]),l("tr",null,[l("td",null,[l("strong",null,"Portainer")]),l("td",null,"portainer.example.dpdns.org"),l("td",null,"9443"),l("td",null,"Docker 容器管理")]),l("tr",null,[l("td",null,[l("strong",null,"Nextcloud")]),l("td",null,"nextcloud.example.dpdns.org"),l("td",null,"80"),l("td",null,"私have云存储")]),l("tr",null,[l("td",null,[l("strong",null,"n8n")]),l("td",null,"n8n.example.dpdns.org"),l("td",null,"5678"),l("td",null,"工作流自动化")]),l("tr",null,[l("td",null,[l("strong",null,"Ollama")]),l("td",null,"ollama.example.dpdns.org"),l("td",null,"11434"),l("td",null,"本地 AI 模型服务")])])]),l("h3",{lang:"zh-CN",id:"pi-zero-2w-服务列表",tabindex:"-1"},[s("Pi Zero 2W 服务列表 "),l("a",{class:"header-anchor",href:"#pi-zero-2w-服务列表","aria-label":'Permalink to "Pi Zero 2W 服务列表 {lang="zh-CN"}"'},"​")]),l("table",null,[l("thead",null,[l("tr",null,[l("th",null,"服务名称"),l("th",null,"域名"),l("th",null,"端口"),l("th",null,"功能描述")])]),l("tbody",null,[l("tr",null,[l("td",null,[l("strong",null,"Pi Syncthing")]),l("td",null,"pi-syncthing.example.dpdns.org"),l("td",null,"8384"),l("td",null,"备用文件同步")]),l("tr",null,[l("td",null,[l("strong",null,"Pi-hole")]),l("td",null,"pihole.example.dpdns.org"),l("td",null,"80"),l("td",null,"DNS 广告拦截")])])]),l("hr"),l("h2",{lang:"zh-CN",id:"免费域名申请与配置",tabindex:"-1"},[s("免费域名申请与配置 "),l("a",{class:"header-anchor",href:"#免费域名申请与配置","aria-label":'Permalink to "免费域名申请与配置 {lang="zh-CN"}"'},"​")]),l("h3",{lang:"zh-CN",id:"第一步-申请-digitalplat-freedomain",tabindex:"-1"},[s("第一步：申请 DigitalPlat FreeDomain "),l("a",{class:"header-anchor",href:"#第一步-申请-digitalplat-freedomain","aria-label":'Permalink to "第一步：申请 DigitalPlat FreeDomain {lang="zh-CN"}"'},"​")]),l("ol",null,[l("li",null,[s("访问 "),l("strong",null,"DigitalPlat FreeDomain – NIC"),s(" 官网")]),l("li",null,[s("选择合适的免费域名后缀（我选择了 "),l("code",null,".dpdns.org"),s("）")]),l("li",null,"注册域名（使用通用示例域名，避免暴露真实信息）"),l("li",null,"完成域名验证")]),l("h3",{lang:"zh-CN",id:"第二步-迁移到-cloudflare",tabindex:"-1"},[s("第二步：迁移到 Cloudflare "),l("a",{class:"header-anchor",href:"#第二步-迁移到-cloudflare","aria-label":'Permalink to "第二步：迁移到 Cloudflare {lang="zh-CN"}"'},"​")]),l("ol",null,[l("li",null,"在 Cloudflare 中添加域名"),l("li",null,"将 DigitalPlat 的 Name Servers 改为 Cloudflare 提供的 NS"),l("li",null,"等待 DNS 传播完成（通常需要 24-48 小时）")]),l("blockquote",null,[l("p",null,[l("strong",null,"小贴士"),s("：免费域名虽然功能有限，但对于 Homelab 来说完全够用。")])]),l("hr"),l("h2",{lang:"zh-CN",id:"cloudflare-zero-trust-隧道配置",tabindex:"-1"},[s("Cloudflare Zero Trust 隧道配置 "),l("a",{class:"header-anchor",href:"#cloudflare-zero-trust-隧道配置","aria-label":'Permalink to "Cloudflare Zero Trust 隧道配置 {lang="zh-CN"}"'},"​")]),l("h3",{lang:"zh-CN",id:"使用-web-gui-配置隧道",tabindex:"-1"},[s("使用 Web GUI 配置隧道 "),l("a",{class:"header-anchor",href:"#使用-web-gui-配置隧道","aria-label":'Permalink to "使用 Web GUI 配置隧道 {lang="zh-CN"}"'},"​")]),l("p",null,"我选择通过 Cloudflare Zero Trust 的 Web 界面来配置隧道，这种方式更加直观和方便："),l("ol",null,[l("li",null,[l("p",null,[l("strong",null,"登录 Cloudflare Zero Trust 控制台")])]),l("li",null,[l("p",null,[l("strong",null,"创建隧道"),s("：")]),l("ul",null,[l("li",null,"进入 Access → Tunnels"),l("li",null,'点击 "Create a tunnel"'),l("li",null,'选择 "Cloudflared" 作为连接器类型'),l("li",null,'为隧道命名（如 "homelab-main"）')])]),l("li",null,[l("p",null,[l("strong",null,"安装 Cloudflared"),s("：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Ubuntu/Debian - 按照控制台显示的命令")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -L"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --output"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cloudflared.deb"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," dpkg"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -i"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cloudflared.deb")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 运行控制台提供的连接命令")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cloudflared"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," service"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [YOUR_TOKEN_HERE]")])])]),l("button",{class:"code-block-unfold-btn"})])]),l("li",null,[l("p",null,[l("strong",null,"配置公共主机名"),s("： 在 Web 界面中添加以下服务映射：")]),l("ul",null,[l("li",null,[l("code",null,"syncthing.example.dpdns.org"),s(" → "),l("code",null,"http://localhost:8384")]),l("li",null,[l("code",null,"cockpit.example.dpdns.org"),s(" → "),l("code",null,"https://localhost:9090")]),l("li",null,[l("code",null,"portainer.example.dpdns.org"),s(" → "),l("code",null,"https://localhost:9443")]),l("li",null,[l("code",null,"nextcloud.example.dpdns.org"),s(" → "),l("code",null,"http://localhost:80")]),l("li",null,[l("code",null,"n8n.example.dpdns.org"),s(" → "),l("code",null,"http://localhost:5678")]),l("li",null,[l("code",null,"ollama.example.dpdns.org"),s(" → "),l("code",null,"http://127.0.0.1:11434")])])])]),l("hr"),l("h2",{lang:"zh-CN",id:"核心服务部署详解",tabindex:"-1"},[s("核心服务部署详解 "),l("a",{class:"header-anchor",href:"#核心服务部署详解","aria-label":'Permalink to "核心服务部署详解 {lang="zh-CN"}"'},"​")]),l("h3",{lang:"zh-CN",id:"_1-文件同步服务-syncthing",tabindex:"-1"},[s("1. 文件同步服务 - Syncthing "),l("a",{class:"header-anchor",href:"#_1-文件同步服务-syncthing","aria-label":'Permalink to "1. 文件同步服务 - Syncthing {lang="zh-CN"}"'},"​")]),l("p",null,[l("strong",null,"为什么选择 Syncthing？")]),l("ul",null,[l("li",null,"去中心化，无需第三方服务器"),l("li",null,"端到端加密，隐私安全"),l("li",null,"跨平台支持，设备间无缝同步")]),l("p",null,[l("strong",null,"APT 安装配置：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 添加官方 APT 源")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mkdir"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/apt/keyrings")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," curl"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -L"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -o"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/apt/keyrings/syncthing-archive-keyring.gpg"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://syncthing.net/release-key.gpg")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"echo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "deb [signed-by=/etc/apt/keyrings/syncthing-archive-keyring.gpg] https://apt.syncthing.net/ syncthing stable"'),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," tee"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/apt/sources.list.d/syncthing.list")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 安装 Syncthing")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," update")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," syncthing")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 启用系统服务")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," enable"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," syncthing@"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$USER")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," syncthing@"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$USER")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,"通过 Syncthing，我的所有设备（手机、笔记本、服务器）都能保持文件同步，再也不用担心文件丢失或版本混乱。"),l("h3",{lang:"zh-CN",id:"_2-工作流自动化-n8n-docker",tabindex:"-1"},[s("2. 工作流自动化 - n8n (Docker) "),l("a",{class:"header-anchor",href:"#_2-工作流自动化-n8n-docker","aria-label":'Permalink to "2. 工作流自动化 - n8n (Docker) {lang="zh-CN"}"'},"​")]),l("p",null,[l("strong",null,"Docker 部署 n8n：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 创建数据目录")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," volume"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," create"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," n8n_data")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 运行 n8n 容器")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --name"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," n8n"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --network=host"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," n8n_data:/home/node/.n8n"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_HOST=n8n.example.dpdns.org"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," WEBHOOK_URL=https://n8n.example.dpdns.org"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," VUE_APP_URL_BASE_API=https://n8n.example.dpdns.org"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_PROTOCOL=https"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_SECURE_COOKIE="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_LISTEN_ADDRESS="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.0.0.0"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_RUNNERS_ENABLED="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --restart"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," unless-stopped"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  docker.n8n.io/n8nio/n8n")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"我的自动化场景：")]),l("ul",null,[l("li",null,[l("strong",null,"文件备份自动化"),s("：检测到重要文件变动时，自动备份到云端")]),l("li",null,[l("strong",null,"系统监控告警"),s("：服务器资源异常时，自动发送通知到手机")]),l("li",null,[l("strong",null,"定时任务管理"),s("：自动清理临时文件，更新系统补丁")])]),l("h3",{lang:"zh-CN",id:"_3-容器管理-portainer-docker",tabindex:"-1"},[s("3. 容器管理 - Portainer (Docker) "),l("a",{class:"header-anchor",href:"#_3-容器管理-portainer-docker","aria-label":'Permalink to "3. 容器管理 - Portainer (Docker) {lang="zh-CN"}"'},"​")]),l("p",null,[l("strong",null,"Docker 部署 Portainer：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 创建数据卷")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," volume"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," create"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer_data")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 运行 Portainer 容器")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -p"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 8000:8000"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -p"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 9443:9443"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --name"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --restart=always"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /var/run/docker.sock:/var/run/docker.sock"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer_data:/data"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  portainer/portainer-ce:lts")])])]),l("button",{class:"code-block-unfold-btn"})]),l("h3",{lang:"zh-CN",id:"_4-dns-过滤与隐私保护-pi-hole-unbound",tabindex:"-1"},[s("4. DNS 过滤与隐私保护 - Pi-hole + Unbound "),l("a",{class:"header-anchor",href:"#_4-dns-过滤与隐私保护-pi-hole-unbound","aria-label":'Permalink to "4. DNS 过滤与隐私保护 - Pi-hole + Unbound {lang="zh-CN"}"'},"​")]),l("p",null,[l("strong",null,"Pi-hole 配置：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 安装 Pi-hole")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -sSL"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://install.pi-hole.net"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bash")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"Unbound 配置（参考官方文档）：")]),l("p",null,[s("根据 "),l("a",{href:"https://docs.pi-hole.net/guides/dns/unbound/",target:"_blank",rel:"noreferrer"},"Pi-hole 官方 Unbound 指南"),s("：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 安装 Unbound")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," unbound")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 创建配置文件")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," nano"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/unbound/unbound.conf.d/pi-hole.conf")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"配置内容：")]),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"server:")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # If no logfile is specified, syslog is used")]),s(`
`),l("span",{class:"line"},[l("span",null,'    # logfile: "/var/log/unbound/unbound.log"')]),s(`
`),l("span",{class:"line"},[l("span",null,"    verbosity: 0")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    interface: 127.0.0.1")]),s(`
`),l("span",{class:"line"},[l("span",null,"    port: 5335")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-ip4: yes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-udp: yes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-tcp: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # May be set to no if you don't have IPv6 connectivity")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-ip6: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # You want to leave this to no unless you have *native* IPv6. With 6to4 and")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Terredo tunnels your web browser should favor IPv4 for the same reasons")]),s(`
`),l("span",{class:"line"},[l("span",null,"    prefer-ip6: no")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Use this only when you downloaded the list of primary root servers!")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # If you use the default dns-root-data package, unbound will find it automatically")]),s(`
`),l("span",{class:"line"},[l("span",null,'    #root-hints: "/var/lib/unbound/root.hints"')]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Trust glue only if it is within the server's authority")]),s(`
`),l("span",{class:"line"},[l("span",null,"    harden-glue: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS")]),s(`
`),l("span",{class:"line"},[l("span",null,"    harden-dnssec-stripped: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details")]),s(`
`),l("span",{class:"line"},[l("span",null,"    use-caps-for-id: no")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Reduce EDNS reassembly buffer size.")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # IP fragmentation is unreliable on the Internet today, and can cause")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # transmission failures when large DNS messages are sent via UDP. Even")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # when fragmentation does work, it may not be secure; it is theoretically")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # possible to spoof parts of a fragmented DNS message, without easy")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # detection at the receiving end. Recently, there was an excellent study")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # >>> Defragmenting DNS - Determining the optimal maximum UDP response size for DNS <<<")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # by Axel Koolhaas, and Tjeerd Slokker (https://indico.dns-oarc.net/event/36/contributions/776/)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # in collaboration with NLnet Labs explored DNS using real world data from the")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # the RIPE Atlas probes and the researchers suggested different values for")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # IPv4 and IPv6 and in different scenarios. They advise that servers should")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # be configured to limit DNS messages sent over UDP to a size that will not")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # trigger fragmentation on typical network links. DNS servers can switch")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # from UDP to TCP when a DNS response is too big to fit in this limited")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # buffer size. This value has also been suggested in DNS Flag Day 2020.")]),s(`
`),l("span",{class:"line"},[l("span",null,"    edns-buffer-size: 1232")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Perform prefetching of close to expired message cache entries")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # This only applies to domains that have been frequently queried")]),s(`
`),l("span",{class:"line"},[l("span",null,"    prefetch: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # One thread should be sufficient, can be increased on beefy machines. In reality for most users running on small networks or on a single machine, it should be unnecessary to seek performance enhancement by increasing num-threads above 1.")]),s(`
`),l("span",{class:"line"},[l("span",null,"    num-threads: 1")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Ensure kernel buffer is large enough to not lose messages in traffic spikes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    so-rcvbuf: 1m")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Ensure privacy of local IP ranges")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 192.168.0.0/16")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 169.254.0.0/16")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 172.16.0.0/12")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 10.0.0.0/8")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: fd00::/8")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: fe80::/10")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Ensure no reverse queries to non-public IP ranges (RFC6303 4.2)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 192.0.2.0/24")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 198.51.100.0/24")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 203.0.113.0/24")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 255.255.255.255/32")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 2001:db8::/32")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"zh-CN",id:"防火墙配置-firewalld",tabindex:"-1"},[s("防火墙配置 - Firewalld "),l("a",{class:"header-anchor",href:"#防火墙配置-firewalld","aria-label":'Permalink to "防火墙配置 - Firewalld {lang="zh-CN"}"'},"​")]),l("p",null,[l("strong",null,"基本防火墙配置：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 安装 firewalld")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 启用服务")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," enable"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 开放必要端口")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=8384/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # Syncthing")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=9090/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # Cockpit")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=9443/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # Portainer")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=80/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # Nextcloud")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=5678/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # n8n")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=11434/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # Ollama")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 重载防火墙规则")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --reload")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 查看开放的端口")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --list-ports")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"zh-CN",id:"自动化备份策略",tabindex:"-1"},[s("自动化备份策略 "),l("a",{class:"header-anchor",href:"#自动化备份策略","aria-label":'Permalink to "自动化备份策略 {lang="zh-CN"}"'},"​")]),l("h3",{lang:"zh-CN",id:"rclone-云端备份",tabindex:"-1"},[s("Rclone 云端备份 "),l("a",{class:"header-anchor",href:"#rclone-云端备份","aria-label":'Permalink to "Rclone 云端备份 {lang="zh-CN"}"'},"​")]),l("p",null,[l("strong",null,"Rclone 配置：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 安装 Rclone")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://rclone.org/install.sh"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," bash")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 配置云存储（以 Google Drive 为例）")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"rclone"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"手动备份命令示例：")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 备份重要数据到 Google Drive")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"rclone"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," sync"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /home/important-data"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," gdrive:backup/"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$("),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"date"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," +%Y-%m-%d"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"--log-file=/var/log/rclone.log")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"zh-CN",id:"tailscale-vpn-网络集成",tabindex:"-1"},[s("Tailscale VPN 网络集成 "),l("a",{class:"header-anchor",href:"#tailscale-vpn-网络集成","aria-label":'Permalink to "Tailscale VPN 网络集成 {lang="zh-CN"}"'},"​")]),l("h3",{lang:"zh-CN",id:"为什么使用-tailscale",tabindex:"-1"},[s("为什么使用 Tailscale？ "),l("a",{class:"header-anchor",href:"#为什么使用-tailscale","aria-label":'Permalink to "为什么使用 Tailscale？ {lang="zh-CN"}"'},"​")]),l("ol",null,[l("li",null,[l("strong",null,"零配置"),s("：无需复杂的 VPN 服务器配置")]),l("li",null,[l("strong",null,"点对点连接"),s("：设备间直接通信，延迟更低")]),l("li",null,[l("strong",null,"安全加密"),s("：基于 WireGuard 的现代加密技术")]),l("li",null,[l("strong",null,"跨平台支持"),s("：支持所有主流操作系统")])]),l("p",null,[l("strong",null,"网络拓扑：")]),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"Internet")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ↓")]),s(`
`),l("span",{class:"line"},[l("span",null,"Cloudflare Zero Trust (公网访问)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ↓")]),s(`
`),l("span",{class:"line"},[l("span",null,"Home WiFi Router")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Main Server (i5-6600T, WiFi)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Pi Zero 2W (DNS + 监控)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    └── Tailscale Subnet Router")]),s(`
`),l("span",{class:"line"},[l("span",null,"              ↓")]),s(`
`),l("span",{class:"line"},[l("span",null,"        Tailscale Network")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Laptop (移动办公)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Phone (随时访问)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    └── Remote VPS (异地备份)")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"zh-CN",id:"安全性考虑与最佳实践",tabindex:"-1"},[s("安全性考虑与最佳实践 "),l("a",{class:"header-anchor",href:"#安全性考虑与最佳实践","aria-label":'Permalink to "安全性考虑与最佳实践 {lang="zh-CN"}"'},"​")]),l("h3",{lang:"zh-CN",id:"_1-网络安全",tabindex:"-1"},[s("1. 网络安全 "),l("a",{class:"header-anchor",href:"#_1-网络安全","aria-label":'Permalink to "1. 网络安全 {lang="zh-CN"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"Zero Trust 原则"),s("：所有连接都需要验证")]),l("li",null,[l("strong",null,"Firewalld 防火墙"),s("：只开放必要的端口")]),l("li",null,[l("strong",null,"定期安全更新"),s("：自动化补丁管理")])]),l("h3",{lang:"zh-CN",id:"_2-数据保护",tabindex:"-1"},[s("2. 数据保护 "),l("a",{class:"header-anchor",href:"#_2-数据保护","aria-label":'Permalink to "2. 数据保护 {lang="zh-CN"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"多重备份"),s("：本地 + 云端备份")]),l("li",null,[l("strong",null,"加密存储"),s("：敏感数据加密存储")]),l("li",null,[l("strong",null,"访问日志"),s("：记录所有访问行为")])]),l("h3",{lang:"zh-CN",id:"_3-监控告警",tabindex:"-1"},[s("3. 监控告警 "),l("a",{class:"header-anchor",href:"#_3-监控告警","aria-label":'Permalink to "3. 监控告警 {lang="zh-CN"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"系统监控"),s("：通过 Cockpit 监控系统状态")]),l("li",null,[l("strong",null,"服务监控"),s("：关键服务可用性检查")]),l("li",null,[l("strong",null,"安全监控"),s("：异常访问行为检测")])]),l("hr"),l("h2",{lang:"zh-CN",id:"成本分析",tabindex:"-1"},[s("成本分析 "),l("a",{class:"header-anchor",href:"#成本分析","aria-label":'Permalink to "成本分析 {lang="zh-CN"}"'},"​")]),l("table",null,[l("thead",null,[l("tr",null,[l("th",null,"项目"),l("th",null,"费用"),l("th",null,"备注")])]),l("tbody",null,[l("tr",null,[l("td",null,"域名"),l("td",null,"RM 0"),l("td",null,"DigitalPlat 免费域名")]),l("tr",null,[l("td",null,"Cloudflare Zero Trust"),l("td",null,"RM 0"),l("td",null,"免费套餐（50用户以下）")]),l("tr",null,[l("td",null,"Tailscale"),l("td",null,"RM 0"),l("td",null,"免费套餐（20设备以下）")]),l("tr",null,[l("td",null,"主服务器 (i5-6600T + 12GB RAM + 256GB SSD)"),l("td",null,"RM 400"),l("td",null,"一次性投入")]),l("tr",null,[l("td",null,"Pi Zero 2W"),l("td",null,"RM 80"),l("td",null,"一次性投入")])])]),l("p",null,[l("strong",null,"总成本"),s("：RM 480 一次性投入，后续运营成本几乎为零！")]),l("hr"),l("h2",{lang:"zh-CN",id:"未来扩展计划",tabindex:"-1"},[s("未来扩展计划 "),l("a",{class:"header-anchor",href:"#未来扩展计划","aria-label":'Permalink to "未来扩展计划 {lang="zh-CN"}"'},"​")]),l("ol",null,[l("li",null,[l("p",null,[l("strong",null,"添加更多服务")]),l("ul",null,[l("li",null,"Home Assistant（智能家居控制）"),l("li",null,"Grafana（数据可视化）"),l("li",null,"GitLab（代码仓库）")])]),l("li",null,[l("p",null,[l("strong",null,"硬件升级")]),l("ul",null,[l("li",null,"增加存储容量"),l("li",null,"升级内存到 16GB"),l("li",null,"添加 UPS 不间断电源")])]),l("li",null,[l("p",null,[l("strong",null,"网络优化")]),l("ul",null,[l("li",null,"考虑有线网络连接"),l("li",null,"部署高可用集群"),l("li",null,"增加异地容灾节点")])])]),l("hr"),l("h2",{lang:"zh-CN",id:"结语",tabindex:"-1"},[s("结语 "),l("a",{class:"header-anchor",href:"#结语","aria-label":'Permalink to "结语 {lang="zh-CN"}"'},"​")]),l("p",null,"经过几天的运行，这套基于免费域名和 Cloudflare Zero Trust 的 Homelab 方案已经完全满足了我的需求。它不仅提供了稳定可靠的服务，还大大提高了我的工作效率。"),l("p",null,[l("strong",null,"关键优势总结：")]),l("ul",null,[l("li",null,[s("✅ "),l("strong",null,"低成本投入"),s("：仅 RM 480 一次性硬件投入")]),l("li",null,[s("✅ "),l("strong",null,"企业级安全"),s("：Cloudflare 提供的安全保护")]),l("li",null,[s("✅ "),l("strong",null,"高度自动化"),s("：减少人工干预，提高效率")]),l("li",null,[s("✅ "),l("strong",null,"隐私保护"),s("：数据完全自主可控")]),l("li",null,[s("✅ "),l("strong",null,"易于维护"),s("：统一的管理界面")])]),l("p",null,"如果你也想搭建自己的 Homelab，但又不想花费太多成本，这套方案绝对值得尝试。记住，最好的技术方案不是最复杂的，而是最适合自己需求的！")],-1),l("div",{lang:"en"},[l("h2",{lang:"en",id:"introduction",tabindex:"-1"},[s("Introduction "),l("a",{class:"header-anchor",href:"#introduction","aria-label":'Permalink to "Introduction {lang="en"}"'},"​")]),l("p",null,"As a tech enthusiast who loves tinkering, I’ve always wanted to build my own homelab. Something that works on my local network, can be securely accessed from the internet, and has automation features to boost productivity. After some research and practice, I successfully built a modern homelab solution based on a free domain and Cloudflare Zero Trust."),l("hr"),l("h2",{lang:"en",id:"why-choose-this-solution",tabindex:"-1"},[s("Why Choose This Solution? "),l("a",{class:"header-anchor",href:"#why-choose-this-solution","aria-label":'Permalink to "Why Choose This Solution? {lang="en"}"'},"​")]),l("p",null,"There are many homelab solutions available, but most either require expensive domains and certificates or lack adequate security. I chose this solution because:"),l("ol",null,[l("li",null,[l("strong",null,"Completely Free"),s(" - Using DigitalPlat FreeDomain for free domain")]),l("li",null,[l("strong",null,"Secure and Reliable"),s(" - Cloudflare Zero Trust provides enterprise-grade security")]),l("li",null,[l("strong",null,"Easy to Manage"),s(" - Unified web interface for all services")]),l("li",null,[l("strong",null,"Highly Automated"),s(" - n8n workflow automation, scheduled backups")]),l("li",null,[l("strong",null,"Privacy Protection"),s(" - Pi-hole + Unbound combo protects DNS privacy")])]),l("blockquote",null,[l("p",null,'"The best homelab solution isn’t the most expensive one, but the one that fits your needs."')]),l("hr"),l("h2",{lang:"en",id:"hardware-configuration-and-architecture",tabindex:"-1"},[s("Hardware Configuration and Architecture "),l("a",{class:"header-anchor",href:"#hardware-configuration-and-architecture","aria-label":'Permalink to "Hardware Configuration and Architecture {lang="en"}"'},"​")]),l("p",null,"My homelab uses a hybrid architecture, mainly including:"),l("h3",{lang:"en",id:"main-server-configuration",tabindex:"-1"},[s("Main Server Configuration "),l("a",{class:"header-anchor",href:"#main-server-configuration","aria-label":'Permalink to "Main Server Configuration {lang="en"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"CPU"),s(": Intel i5-6600T processor")]),l("li",null,[l("strong",null,"Memory"),s(": 12GB DDR4")]),l("li",null,[l("strong",null,"Storage"),s(": 256GB SSD")]),l("li",null,[l("strong",null,"Network"),s(": WiFi connection")])]),l("h3",{lang:"en",id:"supporting-devices",tabindex:"-1"},[s("Supporting Devices "),l("a",{class:"header-anchor",href:"#supporting-devices","aria-label":'Permalink to "Supporting Devices {lang="en"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"Raspberry Pi Zero 2W"),s(": Energy-efficient solution for DNS server and lightweight services")]),l("li",null,[l("strong",null,"Tailscale VPN"),s(": Connecting all devices into a private network")])]),l("hr"),l("h2",{lang:"en",id:"core-service-architecture",tabindex:"-1"},[s("Core Service Architecture "),l("a",{class:"header-anchor",href:"#core-service-architecture","aria-label":'Permalink to "Core Service Architecture {lang="en"}"'},"​")]),l("h3",{lang:"en",id:"main-server-service-list",tabindex:"-1"},[s("Main Server Service List "),l("a",{class:"header-anchor",href:"#main-server-service-list","aria-label":'Permalink to "Main Server Service List {lang="en"}"'},"​")]),l("table",null,[l("thead",null,[l("tr",null,[l("th",null,"Service Name"),l("th",null,"Domain"),l("th",null,"Port"),l("th",null,"Description")])]),l("tbody",null,[l("tr",null,[l("td",null,[l("strong",null,"Syncthing")]),l("td",null,"syncthing.example.dpdns.org"),l("td",null,"8384"),l("td",null,"File synchronization service")]),l("tr",null,[l("td",null,[l("strong",null,"Cockpit")]),l("td",null,"cockpit.example.dpdns.org"),l("td",null,"9090"),l("td",null,"System monitoring panel")]),l("tr",null,[l("td",null,[l("strong",null,"Portainer")]),l("td",null,"portainer.example.dpdns.org"),l("td",null,"9443"),l("td",null,"Docker container management")]),l("tr",null,[l("td",null,[l("strong",null,"Nextcloud")]),l("td",null,"nextcloud.example.dpdns.org"),l("td",null,"80"),l("td",null,"Private cloud storage")]),l("tr",null,[l("td",null,[l("strong",null,"n8n")]),l("td",null,"n8n.example.dpdns.org"),l("td",null,"5678"),l("td",null,"Workflow automation")]),l("tr",null,[l("td",null,[l("strong",null,"Ollama")]),l("td",null,"ollama.example.dpdns.org"),l("td",null,"11434"),l("td",null,"Local AI model service")])])]),l("h3",{lang:"en",id:"pi-zero-2w-service-list",tabindex:"-1"},[s("Pi Zero 2W Service List "),l("a",{class:"header-anchor",href:"#pi-zero-2w-service-list","aria-label":'Permalink to "Pi Zero 2W Service List {lang="en"}"'},"​")]),l("table",null,[l("thead",null,[l("tr",null,[l("th",null,"Service Name"),l("th",null,"Domain"),l("th",null,"Port"),l("th",null,"Description")])]),l("tbody",null,[l("tr",null,[l("td",null,[l("strong",null,"Pi Syncthing")]),l("td",null,"pi-syncthing.example.dpdns.org"),l("td",null,"8384"),l("td",null,"Backup file sync")]),l("tr",null,[l("td",null,[l("strong",null,"Pi-hole")]),l("td",null,"pihole.example.dpdns.org"),l("td",null,"80"),l("td",null,"DNS ad blocking")])])]),l("hr"),l("h2",{lang:"en",id:"free-domain-application-and-configuration",tabindex:"-1"},[s("Free Domain Application and Configuration "),l("a",{class:"header-anchor",href:"#free-domain-application-and-configuration","aria-label":'Permalink to "Free Domain Application and Configuration {lang="en"}"'},"​")]),l("h3",{lang:"en",id:"step-1-apply-for-digitalplat-freedomain",tabindex:"-1"},[s("Step 1: Apply for DigitalPlat FreeDomain "),l("a",{class:"header-anchor",href:"#step-1-apply-for-digitalplat-freedomain","aria-label":'Permalink to "Step 1: Apply for DigitalPlat FreeDomain {lang="en"}"'},"​")]),l("ol",null,[l("li",null,[s("Visit "),l("strong",null,"DigitalPlat FreeDomain – NIC"),s(" official website")]),l("li",null,[s("Select appropriate free domain suffix (I chose "),l("code",null,".dpdns.org"),s(")")]),l("li",null,"Register domain (using generic example domain to avoid exposing real information)"),l("li",null,"Complete domain verification")]),l("h3",{lang:"en",id:"step-2-migrate-to-cloudflare",tabindex:"-1"},[s("Step 2: Migrate to Cloudflare "),l("a",{class:"header-anchor",href:"#step-2-migrate-to-cloudflare","aria-label":'Permalink to "Step 2: Migrate to Cloudflare {lang="en"}"'},"​")]),l("ol",null,[l("li",null,"Add domain in Cloudflare"),l("li",null,"Change DigitalPlat Name Servers to Cloudflare provided NS"),l("li",null,"Wait for DNS propagation (usually takes 24-48 hours)")]),l("blockquote",null,[l("p",null,[l("strong",null,"Tip"),s(": Free domains have limited features, but they’re completely sufficient for homelab use.")])]),l("hr"),l("h2",{lang:"en",id:"cloudflare-zero-trust-tunnel-configuration",tabindex:"-1"},[s("Cloudflare Zero Trust Tunnel Configuration "),l("a",{class:"header-anchor",href:"#cloudflare-zero-trust-tunnel-configuration","aria-label":'Permalink to "Cloudflare Zero Trust Tunnel Configuration {lang="en"}"'},"​")]),l("h3",{lang:"en",id:"using-web-gui-to-configure-tunnels",tabindex:"-1"},[s("Using Web GUI to Configure Tunnels "),l("a",{class:"header-anchor",href:"#using-web-gui-to-configure-tunnels","aria-label":'Permalink to "Using Web GUI to Configure Tunnels {lang="en"}"'},"​")]),l("p",null,"I chose to configure tunnels through the Cloudflare Zero Trust web interface, which is more intuitive and convenient:"),l("ol",null,[l("li",null,[l("p",null,[l("strong",null,"Login to Cloudflare Zero Trust Console")])]),l("li",null,[l("p",null,[l("strong",null,"Create Tunnel"),s(":")]),l("ul",null,[l("li",null,"Go to Access → Tunnels"),l("li",null,'Click "Create a tunnel"'),l("li",null,'Select "Cloudflared" as connector type'),l("li",null,'Name your tunnel (e.g., "homelab-main")')])]),l("li",null,[l("p",null,[l("strong",null,"Install Cloudflared"),s(":")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Ubuntu/Debian - follow the commands shown in console")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -L"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --output"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cloudflared.deb"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," dpkg"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -i"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cloudflared.deb")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Run the connection command provided by console")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cloudflared"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," service"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [YOUR_TOKEN_HERE]")])])]),l("button",{class:"code-block-unfold-btn"})])]),l("li",null,[l("p",null,[l("strong",null,"Configure Public Hostnames"),s(": Add the following service mappings in the web interface:")]),l("ul",null,[l("li",null,[l("code",null,"syncthing.example.dpdns.org"),s(" → "),l("code",null,"http://localhost:8384")]),l("li",null,[l("code",null,"cockpit.example.dpdns.org"),s(" → "),l("code",null,"https://localhost:9090")]),l("li",null,[l("code",null,"portainer.example.dpdns.org"),s(" → "),l("code",null,"https://localhost:9443")]),l("li",null,[l("code",null,"nextcloud.example.dpdns.org"),s(" → "),l("code",null,"http://localhost:80")]),l("li",null,[l("code",null,"n8n.example.dpdns.org"),s(" → "),l("code",null,"http://localhost:5678")]),l("li",null,[l("code",null,"ollama.example.dpdns.org"),s(" → "),l("code",null,"http://127.0.0.1:11434")])])])]),l("hr"),l("h2",{lang:"en",id:"core-service-deployment-details",tabindex:"-1"},[s("Core Service Deployment Details "),l("a",{class:"header-anchor",href:"#core-service-deployment-details","aria-label":'Permalink to "Core Service Deployment Details {lang="en"}"'},"​")]),l("h3",{lang:"en",id:"_1-file-synchronization-service-syncthing",tabindex:"-1"},[s("1. File Synchronization Service - Syncthing "),l("a",{class:"header-anchor",href:"#_1-file-synchronization-service-syncthing","aria-label":'Permalink to "1. File Synchronization Service - Syncthing {lang="en"}"'},"​")]),l("p",null,[l("strong",null,"Why Choose Syncthing?")]),l("ul",null,[l("li",null,"Decentralized, no third-party servers needed"),l("li",null,"End-to-end encryption, privacy secure"),l("li",null,"Cross-platform support, seamless device sync")]),l("p",null,[l("strong",null,"APT Installation Configuration:")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Add official APT repository")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," mkdir"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/apt/keyrings")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," curl"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -L"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -o"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/apt/keyrings/syncthing-archive-keyring.gpg"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://syncthing.net/release-key.gpg")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"echo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "deb [signed-by=/etc/apt/keyrings/syncthing-archive-keyring.gpg] https://apt.syncthing.net/ syncthing stable"'),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," tee"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/apt/sources.list.d/syncthing.list")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Install Syncthing")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," update")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," syncthing")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Enable system service")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," enable"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," syncthing@"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$USER")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," syncthing@"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$USER")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,"Through Syncthing, all my devices (phone, laptop, server) stay in sync, no more worrying about file loss or version conflicts."),l("h3",{lang:"en",id:"_2-workflow-automation-n8n-docker",tabindex:"-1"},[s("2. Workflow Automation - n8n (Docker) "),l("a",{class:"header-anchor",href:"#_2-workflow-automation-n8n-docker","aria-label":'Permalink to "2. Workflow Automation - n8n (Docker) {lang="en"}"'},"​")]),l("p",null,[l("strong",null,"Docker Deployment for n8n:")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Create data directory")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," volume"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," create"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," n8n_data")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Run n8n container")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --name"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," n8n"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --network=host"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," n8n_data:/home/node/.n8n"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_HOST=n8n.example.dpdns.org"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," WEBHOOK_URL=https://n8n.example.dpdns.org"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," VUE_APP_URL_BASE_API=https://n8n.example.dpdns.org"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_PROTOCOL=https"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_SECURE_COOKIE="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"false"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_LISTEN_ADDRESS="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0.0.0.0"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_RUNNERS_ENABLED="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"true"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --restart"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," unless-stopped"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  docker.n8n.io/n8nio/n8n")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"My Automation Scenarios:")]),l("ul",null,[l("li",null,[l("strong",null,"File Backup Automation"),s(": Auto backup to cloud when important files change")]),l("li",null,[l("strong",null,"System Monitoring Alerts"),s(": Send notifications to phone when server resources are abnormal")]),l("li",null,[l("strong",null,"Scheduled Task Management"),s(": Auto cleanup temporary files, update system patches")])]),l("h3",{lang:"en",id:"_3-container-management-portainer-docker",tabindex:"-1"},[s("3. Container Management - Portainer (Docker) "),l("a",{class:"header-anchor",href:"#_3-container-management-portainer-docker","aria-label":'Permalink to "3. Container Management - Portainer (Docker) {lang="en"}"'},"​")]),l("p",null,[l("strong",null,"Docker Deployment for Portainer:")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Create data volume")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," volume"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," create"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer_data")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Run Portainer container")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -p"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 8000:8000"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -p"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 9443:9443"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --name"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --restart=always"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /var/run/docker.sock:/var/run/docker.sock"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer_data:/data"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  portainer/portainer-ce:lts")])])]),l("button",{class:"code-block-unfold-btn"})]),l("h3",{lang:"en",id:"_4-dns-filtering-and-privacy-protection-pi-hole-unbound",tabindex:"-1"},[s("4. DNS Filtering and Privacy Protection - Pi-hole + Unbound "),l("a",{class:"header-anchor",href:"#_4-dns-filtering-and-privacy-protection-pi-hole-unbound","aria-label":'Permalink to "4. DNS Filtering and Privacy Protection - Pi-hole + Unbound {lang="en"}"'},"​")]),l("p",null,[l("strong",null,"Pi-hole Configuration:")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Install Pi-hole")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -sSL"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://install.pi-hole.net"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," bash")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"Unbound Configuration (Following Official Documentation):")]),l("p",null,[s("Following the "),l("a",{href:"https://docs.pi-hole.net/guides/dns/unbound/",target:"_blank",rel:"noreferrer"},"Pi-hole official Unbound guide"),s(":")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Install Unbound")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," unbound")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Create configuration file")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," nano"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/unbound/unbound.conf.d/pi-hole.conf")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"Configuration Content:")]),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"server:")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # If no logfile is specified, syslog is used")]),s(`
`),l("span",{class:"line"},[l("span",null,'    # logfile: "/var/log/unbound/unbound.log"')]),s(`
`),l("span",{class:"line"},[l("span",null,"    verbosity: 0")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    interface: 127.0.0.1")]),s(`
`),l("span",{class:"line"},[l("span",null,"    port: 5335")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-ip4: yes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-udp: yes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-tcp: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # May be set to no if you don't have IPv6 connectivity")]),s(`
`),l("span",{class:"line"},[l("span",null,"    do-ip6: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # You want to leave this to no unless you have *native* IPv6. With 6to4 and")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Terredo tunnels your web browser should favor IPv4 for the same reasons")]),s(`
`),l("span",{class:"line"},[l("span",null,"    prefer-ip6: no")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Use this only when you downloaded the list of primary root servers!")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # If you use the default dns-root-data package, unbound will find it automatically")]),s(`
`),l("span",{class:"line"},[l("span",null,'    #root-hints: "/var/lib/unbound/root.hints"')]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Trust glue only if it is within the server's authority")]),s(`
`),l("span",{class:"line"},[l("span",null,"    harden-glue: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS")]),s(`
`),l("span",{class:"line"},[l("span",null,"    harden-dnssec-stripped: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details")]),s(`
`),l("span",{class:"line"},[l("span",null,"    use-caps-for-id: no")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Reduce EDNS reassembly buffer size.")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # IP fragmentation is unreliable on the Internet today, and can cause")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # transmission failures when large DNS messages are sent via UDP. Even")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # when fragmentation does work, it may not be secure; it is theoretically")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # possible to spoof parts of a fragmented DNS message, without easy")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # detection at the receiving end. Recently, there was an excellent study")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # >>> Defragmenting DNS - Determining the optimal maximum UDP response size for DNS <<<")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # by Axel Koolhaas, and Tjeerd Slokker (https://indico.dns-oarc.net/event/36/contributions/776/)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # in collaboration with NLnet Labs explored DNS using real world data from the")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # the RIPE Atlas probes and the researchers suggested different values for")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # IPv4 and IPv6 and in different scenarios. They advise that servers should")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # be configured to limit DNS messages sent over UDP to a size that will not")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # trigger fragmentation on typical network links. DNS servers can switch")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # from UDP to TCP when a DNS response is too big to fit in this limited")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # buffer size. This value has also been suggested in DNS Flag Day 2020.")]),s(`
`),l("span",{class:"line"},[l("span",null,"    edns-buffer-size: 1232")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Perform prefetching of close to expired message cache entries")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # This only applies to domains that have been frequently queried")]),s(`
`),l("span",{class:"line"},[l("span",null,"    prefetch: yes")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # One thread should be sufficient, can be increased on beefy machines. In reality for most users running on small networks or on a single machine, it should be unnecessary to seek performance enhancement by increasing num-threads above 1.")]),s(`
`),l("span",{class:"line"},[l("span",null,"    num-threads: 1")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Ensure kernel buffer is large enough to not lose messages in traffic spikes")]),s(`
`),l("span",{class:"line"},[l("span",null,"    so-rcvbuf: 1m")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Ensure privacy of local IP ranges")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 192.168.0.0/16")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 169.254.0.0/16")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 172.16.0.0/12")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 10.0.0.0/8")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: fd00::/8")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: fe80::/10")]),s(`
`),l("span",{class:"line"},[l("span")]),s(`
`),l("span",{class:"line"},[l("span",null,"    # Ensure no reverse queries to non-public IP ranges (RFC6303 4.2)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 192.0.2.0/24")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 198.51.100.0/24")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 203.0.113.0/24")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 255.255.255.255/32")]),s(`
`),l("span",{class:"line"},[l("span",null,"    private-address: 2001:db8::/32")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"en",id:"firewall-configuration-firewalld",tabindex:"-1"},[s("Firewall Configuration - Firewalld "),l("a",{class:"header-anchor",href:"#firewall-configuration-firewalld","aria-label":'Permalink to "Firewall Configuration - Firewalld {lang="en"}"'},"​")]),l("p",null,[l("strong",null,"Basic Firewall Configuration:")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Install firewalld")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Enable service")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," enable"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewalld")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Open necessary ports")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=8384/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # Syncthing")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=9090/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # Cockpit")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=9443/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # Portainer")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=80/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # Nextcloud")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=5678/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  # n8n")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --permanent"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --add-port=11434/tcp"),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," # Ollama")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Reload firewall rules")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --reload")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Check open ports")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," firewall-cmd"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --list-ports")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"en",id:"automated-backup-strategy",tabindex:"-1"},[s("Automated Backup Strategy "),l("a",{class:"header-anchor",href:"#automated-backup-strategy","aria-label":'Permalink to "Automated Backup Strategy {lang="en"}"'},"​")]),l("h3",{lang:"en",id:"rclone-cloud-backup",tabindex:"-1"},[s("Rclone Cloud Backup "),l("a",{class:"header-anchor",href:"#rclone-cloud-backup","aria-label":'Permalink to "Rclone Cloud Backup {lang="en"}"'},"​")]),l("p",null,[l("strong",null,"Rclone Configuration:")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Install Rclone")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://rclone.org/install.sh"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," bash")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Configure cloud storage (Google Drive example)")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"rclone"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config")])])]),l("button",{class:"code-block-unfold-btn"})]),l("p",null,[l("strong",null,"Manual Backup Command Examples:")]),l("div",{class:"language-bash"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"},"bash"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# Backup important data to Google Drive")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"rclone"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," sync"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /home/important-data"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," gdrive:backup/"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"$("),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"date"),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," +%Y-%m-%d"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"--log-file=/var/log/rclone.log")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"en",id:"tailscale-vpn-network-integration",tabindex:"-1"},[s("Tailscale VPN Network Integration "),l("a",{class:"header-anchor",href:"#tailscale-vpn-network-integration","aria-label":'Permalink to "Tailscale VPN Network Integration {lang="en"}"'},"​")]),l("h3",{lang:"en",id:"why-use-tailscale",tabindex:"-1"},[s("Why Use Tailscale? "),l("a",{class:"header-anchor",href:"#why-use-tailscale","aria-label":'Permalink to "Why Use Tailscale? {lang="en"}"'},"​")]),l("ol",null,[l("li",null,[l("strong",null,"Zero Configuration"),s(": No complex VPN server setup needed")]),l("li",null,[l("strong",null,"Peer-to-Peer Connection"),s(": Direct device communication, lower latency")]),l("li",null,[l("strong",null,"Secure Encryption"),s(": Modern encryption based on WireGuard")]),l("li",null,[l("strong",null,"Cross-Platform Support"),s(": Supports all major operating systems")])]),l("p",null,[l("strong",null,"Network Topology:")]),l("div",{class:"language-"},[l("button",{title:"Copy code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"Internet")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ↓")]),s(`
`),l("span",{class:"line"},[l("span",null,"Cloudflare Zero Trust (Public Access)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ↓")]),s(`
`),l("span",{class:"line"},[l("span",null,"Home WiFi Router")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Main Server (i5-6600T, WiFi)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Pi Zero 2W (DNS + Monitoring)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    └── Tailscale Subnet Router")]),s(`
`),l("span",{class:"line"},[l("span",null,"              ↓")]),s(`
`),l("span",{class:"line"},[l("span",null,"        Tailscale Network")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Laptop (Mobile Work)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    ├── Phone (Anytime Access)")]),s(`
`),l("span",{class:"line"},[l("span",null,"    └── Remote VPS (Off-site Backup)")])])]),l("button",{class:"code-block-unfold-btn"})]),l("hr"),l("h2",{lang:"en",id:"security-considerations-and-best-practices",tabindex:"-1"},[s("Security Considerations and Best Practices "),l("a",{class:"header-anchor",href:"#security-considerations-and-best-practices","aria-label":'Permalink to "Security Considerations and Best Practices {lang="en"}"'},"​")]),l("h3",{lang:"en",id:"_1-network-security",tabindex:"-1"},[s("1. Network Security "),l("a",{class:"header-anchor",href:"#_1-network-security","aria-label":'Permalink to "1. Network Security {lang="en"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"Zero Trust Principle"),s(": All connections require verification")]),l("li",null,[l("strong",null,"Firewalld Firewall"),s(": Only open necessary ports")]),l("li",null,[l("strong",null,"Regular Security Updates"),s(": Automated patch management")])]),l("h3",{lang:"en",id:"_2-data-protection",tabindex:"-1"},[s("2. Data Protection "),l("a",{class:"header-anchor",href:"#_2-data-protection","aria-label":'Permalink to "2. Data Protection {lang="en"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"Multiple Backups"),s(": Local + Cloud backup")]),l("li",null,[l("strong",null,"Encrypted Storage"),s(": Sensitive data encrypted storage")]),l("li",null,[l("strong",null,"Access Logs"),s(": Record all access behavior")])]),l("h3",{lang:"en",id:"_3-monitoring-and-alerting",tabindex:"-1"},[s("3. Monitoring and Alerting "),l("a",{class:"header-anchor",href:"#_3-monitoring-and-alerting","aria-label":'Permalink to "3. Monitoring and Alerting {lang="en"}"'},"​")]),l("ul",null,[l("li",null,[l("strong",null,"System Monitoring"),s(": Monitor system status through Cockpit")]),l("li",null,[l("strong",null,"Service Monitoring"),s(": Critical service availability checks")]),l("li",null,[l("strong",null,"Security Monitoring"),s(": Abnormal access behavior detection")])]),l("hr"),l("h2",{lang:"en",id:"cost-analysis",tabindex:"-1"},[s("Cost Analysis "),l("a",{class:"header-anchor",href:"#cost-analysis","aria-label":'Permalink to "Cost Analysis {lang="en"}"'},"​")]),l("table",null,[l("thead",null,[l("tr",null,[l("th",null,"Item"),l("th",null,"Cost"),l("th",null,"Notes")])]),l("tbody",null,[l("tr",null,[l("td",null,"Domain"),l("td",null,"MYR 0"),l("td",null,"DigitalPlat free domain")]),l("tr",null,[l("td",null,"Cloudflare Zero Trust"),l("td",null,"MYR 0"),l("td",null,"Free tier (under 50 users)")]),l("tr",null,[l("td",null,"Tailscale"),l("td",null,"MYR 0"),l("td",null,"Free tier (under 20 devices)")]),l("tr",null,[l("td",null,"Main Server (i5-6600T + 12GB RAM + 256GB SSD)"),l("td",null,"MYR 400"),l("td",null,"One-time investment")]),l("tr",null,[l("td",null,"Pi Zero 2W"),l("td",null,"MYR 80"),l("td",null,"One-time investment")])])]),l("p",null,[l("strong",null,"Total Cost"),s(": MYR 480 one-time investment, ongoing operational costs are almost zero!")]),l("hr"),l("h2",{lang:"en",id:"future-expansion-plans",tabindex:"-1"},[s("Future Expansion Plans "),l("a",{class:"header-anchor",href:"#future-expansion-plans","aria-label":'Permalink to "Future Expansion Plans {lang="en"}"'},"​")]),l("ol",null,[l("li",null,[l("p",null,[l("strong",null,"Add More Services")]),l("ul",null,[l("li",null,"Home Assistant (smart home control)"),l("li",null,"Grafana (data visualization)"),l("li",null,"GitLab (code repository)")])]),l("li",null,[l("p",null,[l("strong",null,"Hardware Upgrades")]),l("ul",null,[l("li",null,"Increase storage capacity"),l("li",null,"Upgrade memory to 16GB"),l("li",null,"Add UPS uninterruptible power supply")])]),l("li",null,[l("p",null,[l("strong",null,"Network Optimization")]),l("ul",null,[l("li",null,"Consider wired network connection"),l("li",null,"Deploy high availability cluster"),l("li",null,"Add off-site disaster recovery nodes")])])]),l("hr"),l("h2",{lang:"en",id:"conclusion",tabindex:"-1"},[s("Conclusion "),l("a",{class:"header-anchor",href:"#conclusion","aria-label":'Permalink to "Conclusion {lang="en"}"'},"​")]),l("p",null,"After several days of operation, this homelab solution based on free domain and Cloudflare Zero Trust has completely met my needs. It not only provides stable and reliable services but also greatly improves my work efficiency."),l("p",null,[l("strong",null,"Key Advantages Summary:")]),l("ul",null,[l("li",null,[s("✅ "),l("strong",null,"Low Cost Investment"),s(": Only MYR 480 one-time hardware investment")]),l("li",null,[s("✅ "),l("strong",null,"Enterprise-Grade Security"),s(": Security protection provided by Cloudflare")]),l("li",null,[s("✅ "),l("strong",null,"Highly Automated"),s(": Reduces manual intervention, improves efficiency")]),l("li",null,[s("✅ "),l("strong",null,"Privacy Protection"),s(": Data completely under your control")]),l("li",null,[s("✅ "),l("strong",null,"Easy to Maintain"),s(": Unified management interface")])]),l("p",null,"If you also want to build your own homelab but don’t want to spend too much, this solution is definitely worth trying. Remember, the best technical solution isn’t the most complex one, but the one that best fits your needs!")],-1)])]),"main-header":n(()=>[a(i.$slots,"main-header")]),"main-header-after":n(()=>[a(i.$slots,"main-header-after")]),"main-nav":n(()=>[a(i.$slots,"main-nav")]),"main-content-before":n(()=>[a(i.$slots,"main-content-before")]),"main-content":n(()=>[a(i.$slots,"main-content")]),"main-content-after":n(()=>[a(i.$slots,"main-content-after")]),"main-nav-before":n(()=>[a(i.$slots,"main-nav-before")]),"main-nav-after":n(()=>[a(i.$slots,"main-nav-after")]),comment:n(()=>[a(i.$slots,"comment")]),footer:n(()=>[a(i.$slots,"footer")]),aside:n(()=>[a(i.$slots,"aside")]),"aside-custom":n(()=>[a(i.$slots,"aside-custom")]),default:n(()=>[a(i.$slots,"default")]),_:3},8,["frontmatter"])}}};export{M as default,B as usePageData};
